{"persistifyArgs":{"cache":{"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc/cca78826-f653-4071-8fea-15ae693593ca.js":{"source":"\"use strict\";\ncc._RF.push(module, 'cca78gm9lNAcY/qFa5pNZPK', 'pool');\n// Script/pool.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        enemyPrefab: cc.Prefab\n    },\n    onLoad: function onLoad() {\n        this.enemyPool = new cc.NodePool();\n        var initCount = 5;\n        for (var i = 0; i < initCount; ++i) {\n            var _enemy = cc.instantiate(this.enemyPrefab); // 创建节点\n            this.enemyPool.put(_enemy); // 通过 putInPool 接口放入对象池\n        }\n\n        console.log(this.enemyPool.size());\n\n        var enemy1 = null;\n        var enemy2 = null;\n        var enemy3 = null;\n        if (this.enemyPool.size() > 0) {\n            // 通过 size 接口判断对象池中是否有空闲的对象\n            enemy1 = this.enemyPool.get();\n            enemy2 = this.enemyPool.get();\n            enemy3 = this.enemyPool.get();\n        } else {\n            // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\n            enemy = cc.instantiate(this.enemyPrefab);\n        }\n        enemy1.setPosition(100, 100);\n        enemy2.setPosition(200, 200);\n        this.node.addChild(enemy1); // 将生成的敌人加入节点树\n        this.node.addChild(enemy2);\n        this.node.addChild(enemy3);\n        //enemy.getComponent('Enemy').init(); //接下来就可以调用 enemy 身上的脚本进行初始化\n        console.log(this.enemyPool.size());\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {}\n});\n\ncc._RF.pop();","deps":{}},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/99/9995d69e-22d6-4fda-b5b6-5a3907e02f1f.js":{"source":"\"use strict\";\ncc._RF.push(module, '9995daeItZP2rW2WjkH4C8f', 'animate');\n// Script/animate.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        ani: cc.Animation\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {},\n    playJump: function playJump() {\n        this.ani.play(\"jump\");\n    },\n    playRun: function playRun() {\n        this.ani.play(\"run\");\n    }\n\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RF.pop();","deps":{}},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/df/df1831c2-b02f-4886-839f-ad041479404b.js":{"source":"\"use strict\";\ncc._RF.push(module, 'df183HCsC9IhoOfrQQUeUBL', 'shoot');\n// Script/shoot.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // bullet: {\n        //     default: null,\n        //     type: cc.Prefeb\n        // }\n        bullet: cc.Prefab,\n        bp: cc.Node\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        cc.director.getCollisionManager().enabled = true;\n        // cc.director.getCollisionManager().enabledDebugDraw = true;\n        var canvas = cc.find('Canvas');\n        canvas.on(cc.Node.EventType.TOUCH_START, this.onTouchBegan, this);\n\n        // this.newStar = cc.instantiate(this.bullet);\n        // this.bulletScript = newStar.getComponent(\"bullet\");\n        // this.bulletScript.setAngle();\n\n        // console.log(this.bp.getPosition())\n    },\n\n    onTouchBegan: function onTouchBegan(event) {\n        var scene = cc.director.getScene();\n\n        var touchLoc = this.bp.convertToWorldSpaceAR();\n        // console.log(this.bp.convertToWorldSpaceAR())\n        var x1 = touchLoc.x;\n        var y1 = touchLoc.y;\n        //jiao du角度\n        var mousePosition = event.touch.getLocation();\n        var x2 = mousePosition.x;\n        var y2 = mousePosition.y;\n\n        // var deltaRotation = 90-Math.atan2(y2-y1,x2-x1)*180/Math.PI;\n        // this.node.setRotation(deltaRotation-90)\n\n        //炮口旋转\n        // console.log(this.speedX+\",\"+this.speedY);\n        var normalizedVector = cc.pNormalize(cc.v2(x1 - x2, y1 - y2));\n        // console.log(normalizedVector)\n        var radians = Math.atan2(normalizedVector.y, -normalizedVector.x);\n        // console.log(normalizedVector.x+\",\"+normalizedVector.y)\n\n        var degree = 180 / Math.PI * radians;\n\n        var rotateSpeed = 2 * Math.PI;\n        //那么旋转1弧度所用时间为  \n        var rotate_1rad_time = 1 / rotateSpeed;\n        //所以旋转的时长为  \n        var rotateDuration = Math.abs(radians * rotate_1rad_time);\n\n        // console.log(rotateDuration+\",\"+degree)\n\n        var rotation = cc.rotateTo(0.3, degree + 90);\n        var call = cc.callFunc(function () {\n\n            var touchLoc = this.bp.convertToWorldSpaceAR();\n\n            var bullet = cc.instantiate(this.bullet);\n            // bullet.position = mousePosition;\n            bullet.rotation = degree + 90;\n            bullet.setPosition(touchLoc.x, touchLoc.y);\n\n            var setAngle = bullet.getComponent(\"bullet\");\n            setAngle.setAngle(mousePosition, this.node.getPosition());\n\n            // bullet.active = true;\n            scene.addChild(bullet);\n        }, this);\n        // console.log(radians)\n        var seq = cc.sequence(rotation, call);\n        this.node.runAction(seq);\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc/cc627429-ae34-4bd0-a7a8-e110d1c099d0.js":{"source":"\"use strict\";\ncc._RF.push(module, 'cc627QprjRL0Keo4RDRwJnQ', 'bullet');\n// Script/bullet.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        speed: 100,\n        speedX: 0,\n        speedY: 0\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {},\n    setAngle: function setAngle(a, b) {\n        // console.log(this.speedX)\n        // console.log(this.speedY)\n\n        // console.log(a.x+\",\"+a.y+\"|\"+b.x+\",\"+b.y)\n        this.bx = parseInt(a.x - b.x);\n        this.by = parseInt(a.y - b.y);\n\n        // console.log(this.speedX+\",\"+this.speedY);\n        var normalizedVector = cc.pNormalize(cc.v2(this.bx, this.by));\n        // console.log(normalizedVector)\n        var radians = Math.atan2(normalizedVector.y, -normalizedVector.x);\n        // console.log(radians)\n\n        this.speedX = Math.abs(this.speedX * 5 * normalizedVector.x);\n        this.speedY = Math.abs(this.speedY * 5 * normalizedVector.y);\n\n        // this.speedX = parseInt(a.x)/this.speedX;\n        // this.speedY = parseInt(a.y)/this.speedY;\n\n        // console.log(parseInt(a.x)+\",\"+parseInt(a.y));\n        if (this.bx >= 0 && this.by >= 0) {\n            this.speedX = this.speedX * 1;\n            this.speedY = this.speedY * 1;\n        } else if (this.bx <= 0 && this.by >= 0) {\n            this.speedX = this.speedX * -1;\n            this.speedY = this.speedY * 1;\n        } else if (this.bx <= 0 && this.by <= 0) {\n            this.speedX = this.speedX * -1;\n            this.speedY = this.speedY * -1;\n        } else if (this.bx >= 0 && this.by <= 0) {\n            this.speedX = this.speedX * 1;\n            this.speedY = this.speedY * -1;\n        }\n\n        console.log(this.speedX + \",\" + this.speedY);\n\n        // var degree = 180/Math.PI * radians; \n\n        // var rotateSpeed = 2 * Math.PI;  \n        // //那么旋转1弧度所用时间为  \n        // var rotate_1rad_time = 1 / rotateSpeed;  \n        // //所以旋转的时长为  \n        // var rotateDuration = Math.abs(radians * rotate_1rad_time); \n\n        // console.log(rotateDuration+\",\"+degree)\n\n\n        // var t = cc.pDistance(cc.p(a.x,a.y),b)/this.speed;\n\n        // var moveBy = cc.moveBy(t, cc.p(a.x,a.y)).easing(cc.EaseOutSine(3)); \n        // this.node.runAction(moveBy);\n    },\n    onCollisionEnter: function onCollisionEnter(other, self) {\n        // this.node.destroy();\n    },\n\n    // called every frame, uncomment this function to activate update callback\n    update: function update(dt) {\n        this.node.x += this.speedX * dt;\n        this.node.y += this.speedY * dt;\n    }\n});\n\ncc._RF.pop();","deps":{}},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/6b/6b5c7a9c-20ad-479b-8b6c-cc1f83b6c796.js":{"source":"\"use strict\";\ncc._RF.push(module, '6b5c7qcIK1Hm4tszB+DtseW', 'fish');\n// Script/fish.js\n\n\"use strict\";\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //    default: null,      // The default value will be used only when the component attaching\n        //                           to a node for the first time\n        //    url: cc.Texture2D,  // optional, default is typeof default\n        //    serializable: true, // optional, default is true\n        //    visible: true,      // optional, default is true\n        //    displayName: 'Foo', // optional\n        //    readonly: false,    // optional, default is false\n        // },\n        // ...\n        ani: cc.Animation\n    },\n\n    // use this for initialization\n    onLoad: function onLoad() {\n        this.ani.play(\"fish\");\n    },\n    onCollisionEnter: function onCollisionEnter(other, self) {\n        // this.node.color = \"red\"\n        // this.node.destroy();\n        this.node.color = cc.Color.RED;\n    },\n    onCollisionExit: function onCollisionExit(other, self) {\n        this.node.color = cc.Color.WHITE;\n\n        // this.node.color = \"\"\n    }\n    // called every frame, uncomment this function to activate update callback\n    // update: function (dt) {\n\n    // },\n});\n\ncc._RF.pop();","deps":{}}},"packageCache":{"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/package.json":false,"/Users/ada/Documents/h5edu/Project/package.json":false,"/Users/ada/Documents/h5edu/package.json":false,"/Users/ada/Documents/package.json":false,"/Users/ada/package.json":false,"/Users/package.json":false,"/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/HelloWorld.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/28/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/28/280c3aec-6492-4a9d-9f51-a9b00b570b4a.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/28"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/NewScript.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc/cca78826-f653-4071-8fea-15ae693593ca.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/NewScript - 001.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc/cc627429-ae34-4bd0-a7a8-e110d1c099d0.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/cc"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/bullet.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/df/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/df/df1831c2-b02f-4886-839f-ad041479404b.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/df"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/shoot.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/pool.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/99/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/99/9995d69e-22d6-4fda-b5b6-5a3907e02f1f.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/99"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/animate.js":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/6b/package.json":false,"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/6b/6b5c7a9c-20ad-479b-8b6c-cc1f83b6c796.js":{"__dirname":"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/library/imports/6b"},"/Users/ada/Documents/h5edu/Project/Fishing/FishProject/client/assets/Script/fish.js":false}}}